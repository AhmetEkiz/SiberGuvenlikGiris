# 05.03. Ağı Taramak

# Ağdaki Cihazları Bulmak

Bağlı olduğumuz ağı tarayarak, diğer hangi cihazların sisteme bağlı olduğunu görmeye çalışıyoruz. Bunun içinde **Kali Linux**’da, varsayılan olarak, kurulu bulunan `NetDiscover` ve `Nmap` araçlarını kullanacağız.

- **`Netdiscover`**, yalnızca yerel ağdaki cihazları ARP üzerinden hızla bulur.
- **`Nmap`**, hem cihaz keşfi hem de port/servis/OS analizi yaparak çok daha geniş ve derin bir tarama sunar.

```bash
# sizi doğrudan root kullanıcı yapar ve uzun bir süre boyunca tekrar tekrar şifre sormaz
sudo su

netdiscover  # ağdaki bağlı cihazları ve ip adreslerini görmenizi sağlar

netdiscover -help  # yardım sayfasını açar
```

![image05_03.png](imgs/image05_03.png)

![image05_03.png](imgs/image05_03_1.png)

`*Ctrl+C`  ile çıkış yapabilirsiniz.*

## Nmap

[https://nmap.org/](https://nmap.org/)

**Nmap**, Network Mapper’in kısaltması olan ağ taraması ile zafiyet tespiti amaçlı kullanılan bir araçtır. Ağdaki cihazları, açık portları, servisleri, servis versiyonlarını ve cihazların işletim sistemleri hakkında bilgi toplayabilen açık kaynaklı bir tarama aracıdır.  

- **Amaç:** Host keşfi + port taraması + servis analizi + işletim sistemi tespiti.
- **Çalışma Mantığı:** TCP, UDP, ICMP ve gelişmiş tarama teknikleri.
- **Kapsam:** Yerel ağ + farklı subnet’ler + internet üzerindeki hedefler.
- **Kullanım:** Açık portlar, servis sürümleri, zafiyet ipuçları.
- **Avantaj:** Çok kapsamlı ve modüler.
- **Sınırlama:** `netdiscover`'a göre daha yavaş; aktif tarama nedeniyle kolay tespit edilir.

### Nmap Temel kullanım alanları:

- Host keşfi
- Port taraması
- Servis/versiyon bilgisi toplama
- İşletim sistemi tespiti
- Firewall/IDS davranışı inceleme
- Script tabanlı zafiyet analizi (NSE)

### Nmap CheatSheet (Kopya Kapıdı)

Nmap nasıl kullanılır öğrenmek ve komutların ne anlama geldiğini hatırlamk için CheatSheet dediğimiz kopya kağıdı anlamına gelen sayfaları kullanabilirsiniz. Bir kaç örnek:

- https://highon.coffee/blog/nmap-cheat-sheet/
- https://www.stationx.net/nmap-cheat-sheet/
- https://www.geeksforgeeks.org/ethical-hacking/nmap-cheat-sheet/

```bash
nmap # nmap komutunu yazdığınızda nmap hakkında bilgi verir.
```

![image05_03.png](imgs/image05_03_2.png)

## İlk Nmap Taraması

```bash
nmap -v -sS -A -T4 TARGET

# örnek kod:
nmap -v -sS -A -T4 192.168.23.130
```

- **`-v` → Verbose Mode (Detaylı çıktı)**
    - Tarama sürecinde daha fazla ara çıktı gösterir.
    - Hangi portun tarandığı, taramanın hangi aşamada olduğu gibi detayları ekrana verir.
- **`-sS` → SYN Scan (Stealth Scan)**
    - Yarı açık TCP taramasıdır. (SYN gönderir, SYN/ACK görürse port açıktır.)
    - En hızlı, en güvenilir ve en az gürültülü yöntemdir.
    - IDS tarafından “stealth” olarak kabul edilir.
- **`-A` → Agresif Tarama (OS + Versiyon + Script + Traceroute)**
    - **OS Detection (İşletim sistemi tespiti)**
    - **Version Detection (Servis/versiyon tespiti)**
    - **Default NSE Scripts (varsayılan scriptler ile servis analizi)**
    - **Traceroute (paketlerin yolunu öğrenme)**

Not: -A gerçek pentestlerde dikkat gerektirir; gürültülüdür ve bazı scriptler saldırgan davranabilir.

- **`-T4` → Hız Ayarı (Timing Template 4)**
    - 1–5 arasında hız profilleri vardır:
        - T1: Çok yavaş
        - T2: Yavaş
        - T3: Normal
        - **T4: Hızlı**
        - T5: Çok hızlı (agresif ve tespit edilmesi kolay)
    - `T4`, iç ağlarda genelde kullanılan hızlı ama güvenilir bir tarama modudur.
- **192.168.23.130 → Hedef IP**
    - Tek bir makine taranır.

![image05_03.png](imgs/image05_03_3.png)

❓**Soru:** Daha önce öğrendiğiniz şekilde bu komutun çıktılarını bir dosyaya kaydedin.

✅ **Çözüm:**

```bash
# çıktıları doğrudan bir dosyaya kaydetmek

# hem çıktıları ekrana yazdırır hem de dosyaya kaydeder
nmap -v -sS -A -T4 192.168.23.130 | tee detayli-tarama.txt

# dosyaya kaydeder ama ekrana yazdırmaz
nmap -v -sS -A -T4 192.168.23.130 >> tarama.txt
```

❓ **Soru: nmap** cheatsheet ya da help komutunu kullanarak çıktıyı nasıl bir dosyaya kaydeceğinizi bulun ve komutu çalıştırıın. 

✅ **Çözüm:**

```bash
nmap -v -sS -A -T4 -oN grep-output.txt 192.168.23.130
```

# Kaynaklar

- https://www.beyaz.net/tr/guvenlik/makaleler/nmap_nedir_ve_nasil_kullanilir.html
- https://medium.com/@iremdamar0/nmap-nedir-ve-nas%C4%B1l-kullan%C4%B1l%C4%B1r-8d20a838035
- https://siberbulten.com/teknik/ag-tarama-araci-nmap-nedir-nasil-kullanilir/
- https://www.freecodecamp.org/news/what-is-nmap-and-how-to-use-it-a-tutorial-for-the-greatest-scanning-tool-of-all-time/
- https://www.geeksforgeeks.org/linux-unix/what-is-nmap-a-comprehensive-guide-for-network-mapping/